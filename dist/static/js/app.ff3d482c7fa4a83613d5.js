webpackJsonp([1],{"8qvv":function(e,t){},CY5o:function(e,t){},HrUD:function(e,t){},ITxL:function(e,t){},JWRw:function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("7+uW"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var a=i("VU/8")({name:"App"},s,!1,function(e){i("QC+H")},null,null).exports,o=i("/ocq"),r=i("//Fk"),l=i.n(r),c=i("mtWM");function u(e){0}var d=i.n(c).a.create({baseURL:Object({NODE_ENV:"production"}).VUE_APP_API,timeout:1e4});d.interceptors.request.use(function(e){return e},function(e){return console.log(e),l.a.reject(e)}),d.interceptors.response.use(function(e){var t=e.data,i=t.code;if(void 0===i)return t;switch(i){case 0:return t.data;case"xxx":!function(e){var t=new Error(e);throw u(),t}("[ code: xxx ] "+t.msg+": "+e.config.url);break;default:return t}},function(e){if(e&&e.response)switch(e.response.status){case 400:e.message="请求错误";break;case 401:e.message="未授权，请登录";break;case 403:e.message="拒绝访问";break;case 404:e.message="请求地址出错: "+e.response.config.url;break;case 408:e.message="请求超时";break;case 500:e.message="服务器内部错误";break;case 501:e.message="服务未实现";break;case 502:e.message="网关错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网关超时";break;case 505:e.message="HTTP版本不受支持"}return u(),l.a.reject(e)});var p=d,m={},f="";-1!=window.href.indexOf("github")&&(f="/media-resource/dist/"),m.API_SERVER_HOST=f;var v=m;function h(e){e=e||{},this.id=e.media_type_id,this.media_type_id=e.media_type_id,this.name=e.name,this.note=e.note,this.media_count=e.media_count}h.prototype.retrieveCategoryList=function(e){return p({url:v.API_SERVER_HOST+"/static/mock/categoryList.json",method:"get",params:e})};var g=h;function _(e){e=e||{},this.id=e.media_id,this.media_id=e.media_id,this.name=e.name,this.url=e.url,this.mime=e.mime,this.content=e.content,this.created=e.created,this.media_type_ids=e.media_type_ids,this.deleted=e.deleted,this.user_id=e.user_id,this.played=e.played,this.last_play=e.last_play,this.timelen=e.timelen,this.http=e.http,this.mslen=e.mslen,this.bitrate=e.bitrate,this.media_type_name=e.media_type_name}_.prototype.retrieveResourceList=function(e){return p({url:v.API_SERVER_HOST+"/static/mock/resourceList.json",method:"get",params:e})};var x=_,w={docExts:"doc,docx,xls,xlsx,ppt,pptx,pdf,txt",imgExts:"png,jpg,gif,jpeg,bmp",videoExts:"flv,mp4,avi,wmv,rm,rmvb,mpeg,mov,mpg",audioExts:"mp3,wav,wma",formatSeconds:function(e){var t=parseInt(e/3600);t<10&&(t="0"+t);var i=parseInt((e-3600*t)/60);i<10&&(i="0"+i);var n=parseInt((e-3600*t)%60);return n<10&&(n="0"+n),e>=0?t+":"+i+":"+n:"NaN"},getFileSize:function(e){return e<1024?e+="B":e=e<1048576?(e/1024).toFixed(1)+"KB":e<1073741824?(e/1048576).toFixed(1)+"MB":(e/1073741824).toFixed(1)+"GB",e},getFileType:function(e){var t=[{title:"document",type:3,extensions:this.docExts},{title:"image",type:4,extensions:this.imgExts},{title:"video",type:1,extensions:this.videoExts},{title:"audio",type:2,extensions:this.audioExts}];e=e.toLowerCase();for(var i=0;i<t.length;i++)for(var n=t[i].extensions.split(","),s=0;s<n.length;s++)if(n[s]==e)return t[i].type;return 11},map:{folder:0,video:1,audio:2,document:3,image:4,richtext:5,link:6,courseware:7,question:8,exam:9,virtual:10,0:"文件夹",1:"视频",2:"音频",3:"文档",4:"图片",5:"图文",6:"链接",7:"课件",8:"试题",9:"试卷",10:"虚拟仿真"},getFileTypeIcon:function(e,t,i){var n="";return 1==i?0==e?n="icon-fujianleixingwenjianjia1":1==e?n="icon-sizhengshipin":2==e?n="icon-sizhengyinpin":3==e?n=t&&t.indexOf("doc")>-1?"icon-sizhengword icon-doc":t&&t.indexOf("ppt")>-1?"icon-sizhengppt icon-ppt":t&&t.indexOf("pdf")>-1?"icon-sizhengpdf icon-pdf":t&&t.indexOf("xls")>-1?"icon-sizhengexcel icon-xls":t&&t.indexOf("txt")>-1?"icon-sizhengtxt icon-txt":"icon-sizhengwendang":4==e?n="icon-sizhengtupian":5==e?n="icon-sizhengtuwen":6==e?n="icon-sizhengwangye":7==e?n="icon-sizhengkejian":8==e?n="icon-sizhengqita":9==e?n="icon-sizhengqita":10==e?n="icon-sizhengvr":11==e&&(n="icon-sizhengqita"):0==e?n="icon-fujianleixingwenjianjia1":1==e?n="icon-fujianleixingshipin":2==e?n="icon-fujianleixingyinpin":3==e?n=t&&t.indexOf("doc")>-1?"icon-fujianleixingword icon-doc":t&&t.indexOf("ppt")>-1?"icon-fujianleixingppt icon-ppt":t&&t.indexOf("pdf")>-1?"icon-fujianleixingpdf icon-pdf":t&&t.indexOf("xls")>-1?"icon-fujianleixingexcel icon-xls":t&&t.indexOf("txt")>-1?"icon-fujianleixingtxt icon-txt":"icon-fujianleixingwendang":4==e?n="icon-fujianleixingtupian":5==e?n="icon-fujianleixingtuwen":6==e?n="icon-fujianleixinghtml":7==e?n="icon-fujiankejian":8==e?n="icon-fujianleixingqita1":9==e?n="icon-fujianleixingqita1":10==e?n="icon-fujianvr":11==e&&(n="icon-fujianleixingqita1"),"res-icon-"+e+" iconfont "+n},getFileTypeIconBg:function(e,t){var i="";return 3==e&&(t&&t.indexOf("doc")>-1?i="icon-doc":t&&t.indexOf("ppt")>-1?i="icon-ppt":t&&t.indexOf("pdf")>-1?i="icon-pdf":t&&t.indexOf("xls")>-1?i="icon-xls":t&&t.indexOf("txt")>-1&&(i="icon-txt")),"res-iconbg-"+e+" "+i}},b=i("bOdI"),C=i.n(b),y={name:"ResImg",props:{model:{type:Object,default:{mime:"",url:"",content:""}}},data:function(){return{showPreview:!1}},created:function(){console.log(this.model)},methods:{}},L={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"res-img"},[i("i",{staticClass:"el-icon-picture-outline"}),e._v(" "),i("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.showPreview=!0}}},[e._v("查看")]),e._v(" "),i("el-dialog",{staticClass:"upload-res-dialog",attrs:{title:"预览",visible:e.showPreview,width:"50%"},on:{"update:visible":function(t){e.showPreview=t}}},[i("div",{staticClass:"img-wra"},[i("img",{attrs:{src:e.model.url}})]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.showPreview=!1}}},[e._v("关 闭")])],1)])],1)},staticRenderFns:[]};var j=i("VU/8")(y,L,!1,function(e){i("jOGH")},"data-v-522c095c",null).exports,R={name:"ResVideo",props:{model:{type:Object,default:{mime:"",url:"",content:""}}},data:function(){return{showPreview:!1}},methods:{previewRes:function(){}}},k={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"res-video"},[i("i",{staticClass:"el-icon-video-camera"}),e._v(" "),i("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.showPreview=!0}}},[e._v("预览")]),e._v(" "),i("el-dialog",{staticClass:"upload-res-dialog",attrs:{title:"预览",visible:e.showPreview,width:"50%"},on:{"update:visible":function(t){e.showPreview=t}}},[i("div",{staticClass:"video-wra"},[i("video",{attrs:{src:e.model.url,controls:""}})]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.showPreview=!1}}},[e._v("关 闭")])],1)])],1)},staticRenderFns:[]};var O=i("VU/8")(R,k,!1,function(e){i("CY5o")},"data-v-2aa67e4a",null).exports,E={name:"ResAudio",props:{model:{type:Object,default:{mime:"",url:"",content:""}}},data:function(){return{}}},z={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"res-audio"},[t("i",{staticClass:"el-icon-headset"}),this._v(" "),t("audio",{attrs:{src:this.model.url,controls:"",controlsList:"nodownload"}})])},staticRenderFns:[]};var I=i("VU/8")(E,z,!1,function(e){i("JWRw")},"data-v-efca843e",null).exports,P={name:"ResTxt",props:{model:{type:Object,default:{mime:"",url:"",content:""}}},data:function(){return{msg:"Welcome"}}},T={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"res-txt"},[t("i",{staticClass:"el-icon-document"}),this._v(" "),t("span",{staticClass:"txt-preview"},[this._v(this._s(this.model.content))])])},staticRenderFns:[]};var F=i("VU/8")(P,T,!1,function(e){i("a320")},"data-v-47ef2f9d",null).exports,S=C()({name:"ResItem",props:{model:{type:Object,default:{mime:"",url:"",content:""}}},created:function(){this.model&&this.model.url&&-1==this.model.url.indexOf("http")&&(this.model.url=RES_HOST+this.model.url)},data:function(){return{msg:"Welcome to Your Vue.js App"}},components:{resImg:j,resVideo:O,resAudio:I,resTxt:F}},"created",function(){}),D={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"res-item"},["png"==e.model.mime||"jpg"==e.model.mime?i("res-img",{attrs:{model:e.model}}):e._e(),e._v(" "),"mp4"==e.model.mime?i("res-video",{attrs:{model:e.model}}):e._e(),e._v(" "),"mp3"==e.model.mime?i("res-audio",{attrs:{model:e.model}}):e._e(),e._v(" "),"txt"==e.model.mime?i("res-txt",{attrs:{model:e.model}}):e._e()],1)},staticRenderFns:[]};var V={name:"ResourceList",data:function(){return{title:"媒体资源",tableData:Array(10).fill({name:"王小虎",content:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}),catObj:new g,resObj:new x,catList:[],resList:[],resListTotal:67,resListPn:0,resListPs:0,curCatId:-1,curRes:{},uploadDialogVisible:!1,resCatObj:{},fileList:[]}},created:function(){this.initData()},components:{resItem:i("VU/8")(S,D,!1,function(e){i("Zhff")},"data-v-5500d9f2",null).exports},methods:{initData:function(){this.getCatList(),this.getResList()},getDuration:function(e){return w.formatSeconds(e)},getSize:function(e){return w.getFileSize(e)},getCatList:function(){var e=this;e.catObj.retrieveCategoryList().then(function(t){e.catList=[new g({media_type_id:-1,name:"全部类别"})];for(var i=0;i<t.value.length;i++){var n=new g(t.value[i]);n.editing=!1,e.catList.push(n)}}).catch(function(e){console.log(e)})},addCat:function(){var e=new g;e.editName="",e.editing=!0,this.catList.push(e)},startEditCat:function(e){e.editName=e.name,e.editing=!0},cancelEditCat:function(e,t){e.id>0?e.editing=!1:this.catList.splice(t,1)},editCat:function(e){e.editName?(e.id="718"+parseInt(100*Math.random()),e.name=e.editName,e.editing=!1):this.$message({showClose:!0,message:"名称不能为空",type:"warning"})},deleteCat:function(e){var t=this;t.$confirm("确定要删除此该类别吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.catList.splice(e,1),t.curCatId=-1,t.getResList()}).catch(function(){})},changeCatItem:function(e){console.log(e),this.curCatId=e,this.getResList()},getResList:function(){var e=this;e.resList=[],e.resObj.retrieveResourceList().then(function(t){for(var i=0;i<t.value.length;i++){var n=new x(t.value[i]);-1!=e.curCatId&&n.media_type_ids!=e.curCatId||e.resList.push(n)}}).catch(function(e){console.log(e)})},openEditRes:function(e){if(e){this.curRes=e,this.resCatObj={};for(var t=0;t<this.catList.length;t++)this.catList[t].id==e.media_type_ids&&(this.resCatObj=this.catList[t]);this.fileList=[{name:e.name,url:e.url}]}this.uploadDialogVisible=!0},deleteRes:function(e,t){var i=this;i.$confirm("确定要删除此该资源吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.resList.splice(t,1)}).catch(function(){})},handleSizeChange:function(e){this.resListPs=e,this.getResList()},handleCurrentChange:function(e){this.resListPn=e,this.getResList()},closeUploadDialog:function(){this.uploadDialogVisible=!1,this.curRes={},this.resCatObj={},this.fileList=[]},confirmUploadFile:function(){this.uploadDialogVisible=!1},chooseCat:function(e){console.log(e),this.resCatObj=e}}},N={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{staticClass:"resource-list-page"},[i("el-header",{attrs:{height:"72px"}},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[e._v("业务管理")]),e._v(" "),i("el-breadcrumb-item",[e._v("媒体资源")])],1),e._v(" "),i("div",{staticClass:"title"},[e._v(e._s(e.title))])],1),e._v(" "),i("el-container",[i("el-aside",{attrs:{width:"300px"}},[i("el-menu",e._l(e.catList,function(t,n){return i("el-menu-item",{key:t.id,staticClass:"menu-item",class:{actv:t.id==e.curCatId}},[t.editing?e._e():i("div",{on:{click:function(i){return e.changeCatItem(t.id)}}},[e._v(e._s(t.name))]),e._v(" "),t.editing?i("div",{staticClass:"el-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.editName,expression:"item.editName"}],staticClass:"el-input__inner edit-name",attrs:{placeholder:"请输入类别名称"},domProps:{value:t.editName},on:{input:function(i){i.target.composing||e.$set(t,"editName",i.target.value)}}})]):e._e(),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:-1!=t.id,expression:"item.id != -1"}],staticClass:"opt-wra"},[t.editing?e._e():i("span",{staticClass:"el-icon-edit opt-ico opt-edit",on:{click:function(i){return e.startEditCat(t)}}}),e._v(" "),t.editing?e._e():i("span",{staticClass:"el-icon-delete opt-ico opt-edit",on:{click:function(t){return e.deleteCat(n)}}}),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"item.editing"}],staticClass:"el-icon-check opt-ico opt-confirm",on:{click:function(i){return e.editCat(t)}}}),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"item.editing"}],staticClass:"el-icon-close opt-ico opt-delete",on:{click:function(i){return e.cancelEditCat(t,n)}}})])])}),1),e._v(" "),i("div",{staticClass:"add-cat"},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.addCat()}}},[e._v("添加类别")])],1)],1),e._v(" "),i("el-main",[i("div",[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.openEditRes()}}},[e._v("添加资源")]),e._v(" "),i("el-pagination",{staticClass:"select-pagesize",attrs:{"page-sizes":[10,20,30],"page-size":10,layout:"sizes",total:e.resListTotal}})],1),e._v(" "),i("el-table",{attrs:{data:e.resList}},[i("el-table-column",{attrs:{type:"selection",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),i("el-table-column",{attrs:{label:"内容",width:"350"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("res-item",{attrs:{model:e.row}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"大小/时长"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.timelen?e.getDuration(t.row.timelen):e.getSize(t.row.bitrate)))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.openEditRes(t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{type:"text"}},[e._v("下载")]),e._v(" "),i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.deleteRes(t.row,t.index)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.resListTotal&&e.resList.length,expression:"resListTotal && resList.length"}],staticClass:"pagination-wrapper"},[i("el-pagination",{attrs:{"current-page":e.resListPn,"page-size":100,layout:"prev, pager, next, jumper",total:1e3},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.resListPn=t},"update:current-page":function(t){e.resListPn=t}}})],1)],1)],1),e._v(" "),i("el-dialog",{staticClass:"upload-res-dialog",attrs:{title:e.curRes.id?"编辑资源":"添加资源",visible:e.uploadDialogVisible,width:"50%","before-close":e.closeUploadDialog},on:{"update:visible":function(t){e.uploadDialogVisible=t}}},[i("el-form",[i("el-form-item",[i("el-input",{attrs:{placeholder:"请输入资源名称"},model:{value:e.curRes.name,callback:function(t){e.$set(e.curRes,"name",t)},expression:"curRes.name"}})],1),e._v(" "),i("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"https://jsonplaceholder.typicode.com/posts/",accept:"image/png, image/jpg, .txt, .mp3, .mp4",limit:1,"file-list":e.fileList}},[i("i",{staticClass:"el-icon-upload"}),e._v(" "),i("div",{staticClass:"el-upload__text"},[e._v("\n          点击或将文件拖到这里\n          "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("文件扩展名：.txt .jpg .png .mp3 .mp4")])])]),e._v(" "),i("el-dropdown",{attrs:{placement:"bottom-start"},on:{command:e.chooseCat}},[i("span",{staticClass:"el-dropdown-link"},[e._v("\n          "+e._s(e.resCatObj.id>0?e.resCatObj.name:"请选择所属分类")),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.catList,function(t,n){return i("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:n>0,expression:"index > 0"}],key:n,attrs:{command:t}},[e._v(e._s(t.name))])}),1)],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.closeUploadDialog()}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmUploadFile()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var U=i("VU/8")(V,N,!1,function(e){i("ITxL"),i("HrUD")},"data-v-efe11664",null).exports;n.default.use(o.a);var B=new o.a({routes:[{path:"/",name:"resourceList",component:U},{path:"/resourceList",name:"resourceList",component:U}]}),H=(i("8qvv"),i("ksBL"),i("tvR6"),i("zL8q"));n.default.use(H.Button),n.default.use(H.Select),n.default.use(H.Row),n.default.use(H.Col),n.default.use(H.Menu),n.default.use(H.MenuItem),n.default.use(H.Tabs),n.default.use(H.TabPane),n.default.use(H.Card),n.default.use(H.Form),n.default.use(H.FormItem),n.default.use(H.Input),n.default.use(H.Form),n.default.use(H.Select),n.default.use(H.Option),n.default.use(H.Checkbox),n.default.use(H.CheckboxGroup),n.default.use(H.Radio),n.default.use(H.RadioGroup),n.default.use(H.RadioButton),n.default.use(H.Dropdown),n.default.use(H.DropdownMenu),n.default.use(H.DropdownItem),n.default.use(H.Progress),n.default.use(H.Dialog),n.default.use(H.Tree),n.default.use(H.Cascader),n.default.use(H.Pagination),n.default.use(H.Breadcrumb),n.default.use(H.BreadcrumbItem),n.default.use(H.Table),n.default.use(H.TableColumn),n.default.use(H.Main),n.default.use(H.Submenu),n.default.use(H.Container),n.default.use(H.Header),n.default.use(H.Aside),n.default.use(H.MenuItemGroup),n.default.use(H.Upload),n.default.use(H.Form),n.default.use(H.FormItem),n.default.prototype.$message=H.Message,n.default.prototype.$confirm=H.MessageBox.confirm,n.default.config.productionTip=!1,new n.default({el:"#app",router:B,components:{App:a},template:"<App/>"})},"QC+H":function(e,t){},Zhff:function(e,t){},a320:function(e,t){},jOGH:function(e,t){},ksBL:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.ff3d482c7fa4a83613d5.js.map